# SÃ©curiser son serveur Linux Ubuntu 20.04

## 1 - Modifier son mot de passe root !

PremiÃ¨re chose Ã  faire, si comme moi tu as reÃ§u ton mot de passe root par mail, considÃ¨re le comme potentiellement interceptÃ©. (Comme pour tous tes mots de passe que tu reÃ§ois par mail dâ€™ailleurs).
Ton mot de passe root ne doit Ãªtre connu que par toi et nâ€™Ãªtre accessible par personne dâ€™autre, alors on le change tout de suite. Connectes toi en SSH sur ton serveur et change ton mot de passe avec la commande :

```bash
passwd root
```

## 2 - Root câ€™est fini, bonjour admin
Comme je lâ€™ai dit, la plupart des attaques sont des attaques oÃ¹ des robots vont tenter de se connecter en SSH sur ton serveur avec lâ€™utilisateur root en tentant des combinaisons diffÃ©rentes de mot de passe. Une bonne pratique de sÃ©curitÃ© consiste donc Ã  bloquer root et de le remplacer par un utilisateur de ton choix qui aura les privilÃ¨ges root.

Commences par ajouter un utilisateur, ici, je lâ€™appelle Â« rp Â» parce que câ€™est mes initiales, mais ne sois pas benÃªt et mets les tiennes Ã  la place ðŸ˜‰ :

```bash
adduser rp
```

Puis on ajoute lâ€™utilisateur aux groupes lui permettant dâ€™avoir les privilÃ¨ges root (jâ€™ai rajoutÃ© le groupe adm pour pouvoir consulter les logs sans devoir utiliser sudo) :

```bash
usermod -aG root,sudo,adm rp
```

On modifie maintenant la configuration SSH pour interdire la connexion en tant que root. Tu peux aussi modifier ton port de connexion SSH si tu le souhaites, Ã§a tâ€™Ã©vitera 99.99% des attaques par brute force, mais câ€™est un peu pÃ©nible pour la suite de devoir toujours indiquer ton numÃ©ro de port â€¦
```bash
sudo nano /etc/ssh/sshd_config
``` 
```bash
...
# Interdire Ã  root de se connecter en SSH
PermitRootLogin no
# Facultatif : Modifier le port de connexion pour le SSH
Port 4854
# Facultatif : Seul admin peux se connecter en SSH
AllowUsers rp
# Facultatif : Seul les utilisateurs du groupe sshusers peuvent se connecter en SSH
AllowGroups sshusers
...
``` 
Attention ! Avant de redÃ©marrer ton service SSH, avec une mauvaise configuration, tu risques de perdre complÃ¨tement lâ€™accÃ¨s Ã  ton serveur ! Penses Ã  garder ta session ssh root active le temps de vÃ©rifier que tout va bien et que tu disposes bien des privilÃ¨ges root avec le nouvel utilisateur.

On redÃ©marre le service SSH :
```bash
service ssh restart
``` 

On se connecte en SSH avec le nouvel utilisateur et on teste que la commande sudo fonctionne bien :
```bash
sudo ls -l ./
``` 

Si Ã§a ne fonctionne pas, ne quittes surtout par ta session root et fais ce quâ€™il faut pour que Ã§a marche.

Le principe de sudo est simple, tout ce que tu exÃ©cutes en utilisant le prÃ©fixe sudo va exÃ©cuter la commande avec les droits root. Tu peux mÃªme prendre la main sur lâ€™utilisateur root avec la commande (mais Ã  Ã©viter) :
```bash
sudo su
``` 

## 3 â€“ Un firewall strict = maÃ®trise des portes dâ€™entrÃ©es / sorties

Sur ton serveur, plusieurs services sont en cours dâ€™exÃ©cution et certains sont Ã  lâ€™Ã©coute sur des ports ouverts ce qui peut prÃ©senter un risque si le logiciel derriÃ¨re le port ouvert contient une faille. Il est important de configurer un firewall qui bloquera tous les ports sauf ceux dont nous avons besoin et dont le logiciel qui lâ€™utilise est sÃ©rieux, rÃ©putÃ© pour Ãªtre sÃ©curisÃ© et dont on a confiance.

Aller hop ! On installe lâ€™incontournable paquet iptable :
```bash
sudo apt-get install iptables
``` 

On dÃ©finit les rÃ¨gles du firewall, en fonction des services que tu utilises, commentes, dÃ©-commentes ou ajoute des lignes :
```bash
sudo nano /etc/init.d/firewall
``` 
```bash
#! /bin/sh
### BEGIN INIT INFO
# Provides:          PersonalFirewall
# Required-Start:    $remote_fs $syslog
# Required-Stop:     $remote_fs $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Personal Firewall
# Description:       Init the firewall rules
### END INIT INFO

# programme iptables IPV4 et IPV6
IPT=/sbin/iptables                                                                                                                                                                 
IP6T=/sbin/ip6tables
# Les IPs
#IP_TRUSTED=xx.xx.xx.xx

do_start() {                                                                                                                                                                       
# Efface toutes les regles en cours. -F toutes. -X utilisateurs                                                                                                                
$IPT -t filter -F                                                                                                                                                              
$IPT -t filter -X                                                                                                                                                              
$IPT -t nat -F                                                                                                                                                                 
$IPT -t nat -X                                                                                                                                                                 
$IPT -t mangle -F                                                                                                                                                              
$IPT -t mangle -X                                                                                                                                                              
$IP6T -t filter -F                                                                                                                                                             
$IP6T -t filter -X                                                                                                                                                              
$IP6T -t mangle -F                                                                                                                                                             
$IP6T -t mangle -X                                                                                                                                                             
# strategie (-P) par defaut : bloc tout l'entrant le forward et autorise le sortant                                                                                            
$IPT -t filter -P INPUT DROP                                                                                                                                                   
$IPT -t filter -P FORWARD DROP                                                                                                                                                 
$IPT -t filter -P OUTPUT ACCEPT                                                                                                                                                
$IP6T -t filter -P INPUT DROP                                                                                                                                                  
$IP6T -t filter -P FORWARD DROP                                                                                                                                                
$IP6T -t filter -P OUTPUT ACCEPT                                                                                                                                               
# Loopback                                                                                                                                                                     
$IPT -t filter -A INPUT -i lo -j ACCEPT                                                                                                                                        
$IPT -t filter -A OUTPUT -o lo -j ACCEPT                                                                                                                                       
$IP6T -t filter -A INPUT -i lo -j ACCEPT                                                                                                                                       
$IP6T -t filter -A OUTPUT -o lo -j ACCEPT                                                                                                                                      
# Permettre a une connexion ouverte de recevoir du trafic en entree                                                                                                            
$IPT -t filter -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT                                                                                                         
$IP6T -t filter -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT                                                                                                        
# ICMP                                                                                                                                                                         
$IPT -t filter -A INPUT -p icmp -j ACCEPT                                                                                                                                      
# DNS:53                                                                                                                                                                       
$IPT -t filter -A INPUT -p tcp --dport 53 -j ACCEPT                                                                                                                            
$IPT -t filter -A INPUT -p udp --dport 53 -j ACCEPT                                                                                                                            
$IP6T -t filter -A INPUT -p tcp --dport 53 -j ACCEPT                                                                                                                           
$IP6T -t filter -A INPUT -p udp --dport 53 -j ACCEPT                                                                                                                           
# SSH:22
# ATTENTION, indiques bien ton port personnalisÃ© si tu l'as changÃ©                                                                                                                                                                     
$IPT -t filter -A INPUT -p tcp --dport 22 -j ACCEPT                                                                                                                            
$IP6T -t filter -A INPUT -p tcp --dport 22 -j ACCEPT                                                                                                                           
# HTTP:80                                                                                                                                                                     
$IPT -t filter -A INPUT -p tcp --dport 80 -j ACCEPT                                                                                                                            
$IP6T -t filter -A INPUT -p tcp --dport 80 -j ACCEPT                                                                                                                           
# HTTPS:443                                                                                                                                                                        
$IPT -t filter -A INPUT -p tcp --dport 443 -j ACCEPT                                                                                                                           
$IP6T -t filter -A INPUT -p tcp --dport 443 -j ACCEPT                                                                                                                          
# SMTP:25/587/465                                                                                                                                                                         
$IPT -t filter -A INPUT -p tcp --dport 25 -j ACCEPT                                                                                                                            
$IP6T -t filter -A INPUT -p tcp --dport 25 -j ACCEPT                                                                                                                           
$IPT -t filter -A INPUT -p tcp --dport 587 -j ACCEPT                                                                                                                           
$IP6T -t filter -A INPUT -p tcp --dport 587 -j ACCEPT
#    $IPT -t filter -A INPUT -p tcp --dport 465 -j ACCEPT
#    $IP6T -t filter -A INPUT -p tcp --dport 465 -j ACCEPT
    # POP3:110/995                                                                                                                                                                         
#    $IPT -t filter -A INPUT -p tcp --dport 110 -j ACCEPT
#    $IP6T -t filter -A INPUT -p tcp --dport 110 -j ACCEPT
#    $IPT -t filter -A INPUT -p tcp --dport 995 -j ACCEPT
#    $IP6T -t filter -A INPUT -p tcp --dport 995 -j ACCEPT
    # IMAP / SIEVE : 143/993/4190                                                                                                                                                                 
#    $IPT -t filter -A INPUT -p tcp --dport 143 -j ACCEPT
#    $IP6T -t filter -A INPUT -p tcp --dport 143 -j ACCEPT
    $IPT -t filter -A INPUT -p tcp --dport 993 -j ACCEPT                                                                                                                           
    $IP6T -t filter -A INPUT -p tcp --dport 993 -j ACCEPT                                                                                                                          
    $IPT -t filter -A INPUT -p tcp --dport 4190 -j ACCEPT                                                                                                                          
    $IP6T -t filter -A INPUT -p tcp --dport 4190 -j ACCEPT                                                                                                                         
    # accepte tout d'une ip en TCP                                                                                                                                                 
#    $IPT -t filter -A INPUT -p tcp -s $IP_TRUSTED -j ACCEPT
    echo "firewall started [OK]"                                                                                                                                                   
}
# fonction qui arrete le firewall
do_stop() {                                                                                                                                                                        
# Efface toutes les regles                                                                                                                                                     
$IPT -t filter -F                                                                                                                                                              
$IPT -t filter -X                                                                                                                                                              
$IPT -t nat -F                                                                                                                                                                 
$IPT -t nat -X                                                                                                                                                                 
$IPT -t mangle -F                                                                                                                                                              
$IPT -t mangle -X
$IP6T -t filter -F
$IP6T -t filter -X
$IP6T -t mangle -F
$IP6T -t mangle -X
# remet la strategie
$IPT -t filter -P INPUT ACCEPT
$IPT -t filter -P OUTPUT ACCEPT
$IPT -t filter -P FORWARD ACCEPT
$IP6T -t filter -P INPUT ACCEPT
$IP6T -t filter -P OUTPUT ACCEPT
$IP6T -t filter -P FORWARD ACCEPT
#
echo "firewall stopped [OK]"
}
# fonction status firewall
do_status() {
# affiche les regles en cours
clear
echo Status IPV4
echo -----------------------------------------------
$IPT -L -n -v
echo
echo -----------------------------------------------
echo
echo status IPV6
echo -----------------------------------------------
$IP6T -L -n -v
echo
}
case "$1" in
start)
do_start
exit 0
;;
stop)
do_stop
exit 0
;;
restart)
do_stop
do_start
exit 0
;;
status)
do_status
exit 0
;;
*)
echo "Usage: /etc/init.d/firewall {start|stop|restart|status}"
exit 1
;;
esac
``` 

Il faut donner les droits dâ€™exÃ©cution au script :
```bash
sudo chmod +x /etc/init.d/firewall
```
Attention ! Si tu dÃ©finis mal les rÃ¨gles, tu peux te bloquer toi mÃªme et ne plus pouvoir accÃ©der au serveur. Je te conseille fortement dâ€™exÃ©cuter le script puis essaye de te rÃ©-authentifier en SSH. Si aprÃ¨s exÃ©cution du script, tout est bloquÃ©, tu as perdu ta session et impossible de te reconnecter, redÃ©marre le serveur pour rÃ©initialiser le firewall.

Câ€™est partit ! On lance le script :
```bash
sudo /etc/init.d/firewall start
```

Si tout va bien et que tu peux toujours te connecter en SSH, alors on peut indiquer au serveur que tu veux que le script soit exÃ©cutÃ© au dÃ©marrage pour que jamais le firewall ne soit corrompu :
```bash
sudo update-rc.d firewall defaults
```
Si tu changes dâ€™avis, tu peux le retirer avec la commande :
```bash
sudo update-rc.d -f firewall remove
```
## 4 â€“ Fail2Ban, surveillance des logs et bannissement par IP

Fail2Ban permet de bannir les machines qui tentent de brute forcer votre serveur.

On installe le paquet fail2ban :
```bash
sudo apt-get install fail2ban
```

CrÃ©er le fichier de configuration
```bash
sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local
```
```bash
sudo nano /etc/fail2ban/jail.local
```
```bash
...
# DurÃ©e du bannissement en seconde
bantime  = 600
# Plage de temps de surveillance des logs
findtime = 600
# Nombre de tentatives avant bannissement
maxretry = 3
# Adresse mail des notifications
destemail = moi@mondomain.fr
# Nom du sender dans les notifications mail
sendername = Fail2ban
...
```

Dans ce fichier, sont configurÃ©s diffÃ©rents filtres [ssh], [apache-auth]... On va indiquer au serveur lesquels doivent Ãªtre surveillÃ©s.
```bash
sudo nano /etc/fail2ban/jail.d/custom.conf
```
```bash
[sshd]
enabled = true
[sshd-ddos]
enabled = true
[postfix]
enabled = true
[dovecot]
enabled = true
#[sieve]
#enabled = true
[recidive]
enabled = true
```

Câ€™est un exemple, il faut indiquer les services que tu utilises toi.

Depuis une derniÃ¨re version de fail2ban, pour recevoir les mails de notification, il faut indiquer votre mail dans les fichiers :
```bash
sudo nano /etc/fail2ban/action.d/sendmail-common.conf
sudo nano /etc/fail2ban/action.d/mail.conf
sudo nano /etc/fail2ban/action.d/mail-whois.conf
```

Je mâ€™arrÃªte 2 secondes sur le filtre [recidive]. Il permet de bannir plus longtemps les IPs qui ont dÃ©jÃ  Ã©tÃ© bannie plusieurs fois. Par exemple, on va pouvoir dire Ã  fail2ban de bannir pendant 1 an les IPs qui ont dÃ©jÃ  Ã©tÃ© bannies 3 fois dans la journÃ©e.

Une fois que tout est configurÃ©, on redÃ©marre le service :
```bash
sudo service fail2ban restart
```

Puis on vÃ©rifie que les prisons sont bien en service :
```bash
sudo fail2ban-client status
```

## 5 â€“ Toujours Ã  jour avec cron-apt
Bon, câ€™est bien beau, mon serveur est sÃ©curisÃ© mais que se passe il le jour oÃ¹ une faille dans un logiciel est dÃ©couverte pendant que je suis en vacance ? Un pirate aura tout son temps pour en profiter.

Un serveur fait les choses de faÃ§on automatique non ? HÃ© bien quâ€™il se mette Ã  jour tout seul ! Aller on installe le paquet cron-apt :
```bash
sudo apt-get install cron-apt
```

On veux faire les mises Ã  jour de sÃ©curitÃ© uniquement, donc on crÃ©e un nouveau fichier de source :
```bash
grep security /etc/apt/sources.list > /etc/apt/security.sources.list
```

Un peu de configuration :
```bash
sudo nano /etc/cron-apt/config
```
```bash
APTCOMMAND=/usr/bin/apt-get
OPTIONS="-o quiet=1 -o Dir::Etc::SourceList=/etc/apt/security.sources.list"
MAILTO="moi@mondomain.fr"
MAILON="upgrade"
```

On indique quâ€™on veut que cron-apt installe les mises Ã  jour quand il en trouve :
```bash
sudo nano /etc/cron-apt/action.d/3-download
```
```bash
dist-upgrade -y -o APT::Get::Show-Upgraded=true
```

Cron-apt se lance par dÃ©faut toute les nuits Ã  4h du matin, si tu veux modifier Ã§a, câ€™est ici : 
```bash
sudo nano /etc/cron.d/cron-apt
```

Ok, on est pas trop mal lÃ , câ€™est plutÃ´t bien sÃ©cure ! Mais nous on est des dingues, on va encore plus loin ! Il est toujours possible de protÃ©ger plus son serveur, mais plus lâ€™on protÃ¨ge plus on ajoute de contraintes. La protection ultime nâ€™existe pas, du moment que la machine est connectÃ©e Ã  internet, la moindre faille peut-Ãªtre exploitÃ©e de faÃ§on plus ou moins ingÃ©nieuse.

# SÃ©curitÃ© avancÃ©e
## 1 â€“ Rkhunter : DÃ©tecter les intrusions
Rhkunter calcule les empreintes MD5 des logiciels installÃ©s sur ton serveur. Si un pirate arrivait Ã  pÃ©nÃ©trer ton serveur, il est fort probable quâ€™il ajoute une backdoor afin de pouvoir revenir facilement par la suite. Rkhunter dÃ©tecte donc ces backdoors et tâ€™avertis.

On installe le paquet rkhunter :
```bash
sudo apt install rkhunter
```

Puis on Ã©dite la configuration :
```bash
sudo nano /etc/default/rkhunter
```

### Pour effectuer une vÃ©rification chaque jour
```bash
CRON_DAILY_RUN="yes"
REPORT_EMAIL="moi@mondomaine.fr"
```

Rkhunter va parfois tâ€™avertir de modifications sur un logiciel alors que tu en es Ã  lâ€™origine (suite Ã  une mise Ã  jour par exemple), dans ce cas, il faut mettre la base dâ€™empreintes Ã  jour avec la commande :
```bash
sudo rkhunter --propupd
```

## 2 â€“ Logwatch : Surveillez lâ€™activitÃ© de votre serveur
Logwatch est un utilitaire qui analyse vos logs du serveur pour te faire un rÃ©capitulatif tous les jours sous forme de mail. DelÃ  te permet de dÃ©tecter les anomalies. Logwatch va par exemple te faire un rÃ©capitulatif des mails sortants de votre serveur. Tu pourras ainsi voir si ton serveur ne sert pas de passerelle pour le spam. Il va tâ€™indiquer les attaques bloquÃ©es par fail2ban, etc â€¦

On installe le paquet logwatch :
```bash
sudo apt install logwatch
```

On le configure :
```bash
sudo cp /usr/share/logwatch/default.conf/logwatch.conf /etc/logwatch/conf/logwatch.conf
sudo nano /etc/logwatch/conf/logwatch.conf
```

```bash
# Pour recevoir les mails au format html, c'est plus agrÃ©able Ã  lire
Format = html
# Adresse sur laquelle recevoir les mails
MailTo = moi@mondomaine.fr
# Niveau de dÃ©tail des logs
Detail = Med
```

Et si tu veux recevoir un rapport lÃ  tout de suite :
```bash
sudo logwatch --mailto moi@mondomaine.fr --output html
```

## 3 â€“ Analyser de trafic en temps rÃ©el
Les deux logiciels suivants analysent le trafic en temps rÃ©el pour empÃªcher les attaques. Ils se lancent donc Ã  chaque requÃªte vers le serveur pour dÃ©tecter les attaques et consomment donc des ressources, ce qui ralentit les Ã©changes. Dans le cas dâ€™un serveur dâ€™hÃ©bergement web, ce nâ€™est pas trÃ¨s pertinent si tu souhaites des sites qui rÃ©pondent du tac au tac. AprÃ¨s, câ€™est toi qui vois en fonction de tes besoins en sÃ©curitÃ©. Je ne vais pas mâ€™attarder dessus dans cet article.

Portsentry : DÃ©tection des scans de ports trÃ¨s puissante. Pour lâ€™utiliser câ€™est ici.
Snort : SystÃ¨me de dÃ©tection dâ€™intrusion. Pour lâ€™utiliser câ€™est ici.

## 4 â€“ Une alarme SSH
Une autre chose trÃ¨s simple que tu peux mettre en place est une alerte mail dÃ¨s quâ€™une authentification ssh a lieu sur ton serveur.

Cette mÃ©thode est plutÃ´t contraignante, car normalement, tous les mails reÃ§us sont des faux positifs â€¦

Ã‰dites le fichier .bashrc de lâ€™utilisateur Ã  protÃ©ger (dans le homedir) et ajoutes Ã  la fin du fichier :
```bash
sudo nano ~/.bashrc
```
```bash
echo "Objet : Alerte connexion SSH.
Serveur : `hostname`
Date : `date`
`who` " | mail -s "`hostname` connexion ssh de : `who | cut -d"(" -f2 | cut -d")" -f1`" moi@mondomaine.fr
```

Si tu veux le mettre en place pour lâ€™utilisateur root, le fichier est /root/.bashrc car le homedir de root est /root/

## 5- Restrictions par IP
Cette mÃ©thode est trÃ¨s efficace, car seul lâ€™IP de ton choix peut communiquer avec le serveur sur le protocole choisi. Par contre, les offres dâ€™accÃ¨s internet permettent rarement dâ€™avoir une IP fixe. Et puis tu ne pourras plus accÃ©der Ã  ton serveur de nâ€™importe oÃ¹ (sauf VPN).

Il existe plusieurs mÃ©thodes pour restreindre par IPs. Je te prÃ©sente celle qui utilise le firewall. Si tu as suivi ce tuto depuis le dÃ©but, nous avons crÃ©Ã© un fichier /etc/init.d/firewall.

Il suffit de rajouter les options `-s 100:100:100:100, 101:101:101:101` sur les protocoles Ã  restreindre (avec tes IPs bien sÃ»r â€¦).

Exemple pour restreindre le protocole SSH sur mon IP seulement :
```bash
sudo nano /etc/init./firewall
```
```bash
$IPT -t filter -A INPUT -p tcp --dport 22 -s 100:100:100:100 -j ACCEPT
$IP6T -t filter -A INPUT -p tcp --dport 22 -s 100:100:100:100 -j ACCEPT
```

Tu peux faire de mÃªme sur tous les ports que tu veux. Si tu veux le faire temporairement, par exemple pour autorisÃ© un ami Ã  se connecter de chez lui :

```bash
iptables -t filter -A INPUT -p tcp --dport 22 -s 100:100:100:100 -j ACCEPT
ip6tables -t filter -A INPUT -p tcp --dport 22 -s 100:100:100:100 -j ACCEPT
```

Quand il a fini, on rÃ©initialise, on applique la tolÃ©rance zÃ©ro !
```bash
iptables -t filter -A INPUT -p tcp --dport 22 -s 100:100:100:100 -j DROP
ip6tables -t filter -A INPUT -p tcp --dport 22 -s 100:100:100:100 -j DROP
```

Tu peux aussi redÃ©marrer le firewall pour lui retirer les droits (cela rÃ©initialise toutes les rÃ¨gles) :
```bash
sudo /etc/init.d/firewall restart
```

## 6 â€“ Authentification SSH par clÃ© privÃ©e
Lâ€™authentification par clÃ© privÃ©e augmente considÃ©rablement la difficultÃ© de brute forcer le serveur en SSH. Il faut Ã  la fois un fichier et une clÃ© pour dÃ©crypter ce fichier avant de pouvoir se connecter au serveur.

Jâ€™ai fait un article expliquant la mise en place dâ€™une authentification SSH par clÃ© privÃ©e : câ€™est ici !

Une fois ta clÃ© publique insÃ©rÃ©e sur le serveur, configure ton service SSH pour bloquer lâ€™authentification par mot de passe simple :
```bash
sudo nano /etc/ssh/sshd_config
```
```bash
...
RSAAuthentication yes
# Autoriser l'authentification par clÃ© privÃ©e
PubkeyAuthentication yes
# Bloquer l'authentification avec mot de passe simple
PasswordAuthentication no    
...
```

On relance le service SSH :
```bash
sudo service ssh restart
```

Attention ! Encore une fois, assure-toi que Ã§a marche bien en essayant de tâ€™authentifier avec ta clÃ© avant de fermer ta session sinon tu vas perdre accÃ¨s Ã  ton serveur â€¦

Si tu gÃ¨res plusieurs serveurs, il est plus agrÃ©able de se connecter avec la mÃªme clÃ© privÃ©e. Ainsi, aucun mot de passe ne tâ€™es demandÃ© pour te connecter une fois que ta clÃ© privÃ©e est dÃ©verrouillÃ©e. Il y a donc aussi des avantages Ã  utiliser cette mÃ©thode. tu peux aussi permettre la connexion via clÃ© privÃ©e et via mot de passe (au choix). Dans ce cas, tu ne gagne pas en sÃ©curitÃ©, mais tu gagne en simplicitÃ© dâ€™utilisation.

# Le mot de la fin
La sÃ©curitÃ© dâ€™un serveur est un sujet dÃ©licat, plus tu as de services qui tournent sur le serveur, plus le nombre de failles potentielles est important. Je te recommande de diviser pour mieux rÃ©gner, sÃ©pares tes services (mails, hÃ©bergement, cloud, etc â€¦) sur des serveurs diffÃ©rents. Si lâ€™un des services tombe, les autres subsistent et câ€™est lâ€™un des avantages des serveurs virtuels.

Autre chose, plus tu as dâ€™utilisateurs sur un serveur, plus le risque de mot de passe Â« dans la nature Â» est grand. Les utilisateurs Â« lÃ©gaux Â» de ton serveur sont la plupart du temps les Ã©lÃ©ments dÃ©clencheurs des problÃ¨mes. Penses donc Ã  attribuer le strict minimum de droits Ã  tes utilisateurs sur le serveur et formes-les. Mets en place des restrictions sur tes services (exemple : maximum dâ€™envois de mails par heure par utilisateur pour Ã©viter que lâ€™utilisateur puisse servir de relais spam en Ã©tant piratÃ©). Obliges tes utilisateurs Ã  utiliser des mots de passe complexes.

Mets Ã  jour tes logiciels le plus souvent possibles !

Tiens-toi informÃ© sur les logiciels que tu utilises pour Ãªtre au courant des derniÃ¨res failles, abandon de projet, etc...

Forces lâ€™utilisation de protocoles sÃ©curisÃ©s utilisant le cryptage SSL ou TLS (ssh, https, imaps, smtps, etc â€¦)

Tentes de te pirater toi-mÃªme, cherches les failles dans ton systÃ¨me, fais une veille sur la sÃ©curitÃ©.
